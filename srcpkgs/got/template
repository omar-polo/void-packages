# Template file for 'got'
pkgname=got
version=0.83
revision=1
build_style=gnu-configure
hostmakedepends="byacc pkg-config"
makedepends="libmd-devel zlib-devel libuuid-devel libbsd-devel ncurses-devel openssl-devel libevent-devel"
short_desc="VCS which prioritizes ease of use and simplicity over flexibility"
maintainer="Omar Polo <op@omarpolo.com>"
license="ISC"
homepage="https://gameoftrees.org"
changelog="https://gameoftrees.org/releases/CHANGES"
distfiles="https://gameoftrees.org/releases/portable/got-portable-${version}.tar.gz"
checksum="90d854e8e47d21434f2fbd83f749e1ab65f9be6556ed8526a67abf10e52f1bff"
nocross="the template subproject needs to be compiled and executed on the host but produces object files that are used by the cross build."

post_extract() {
	# XXX: doesn't correctly link to libbsd; will be fixed for the next release
	(cd template && \
		sed -i.orig 's,sys/queue.h,bsd/sys/queue.h,g' configure parse.[cy])
}

post_install() {
	sed -n '/Copyright/,/PERFORMANCE/p' got/got.c > LICENSE
	vlicense LICENSE
}
